---
title: "Web App «PTM»"
descr: "Разработка системы управления задачами PTM с интеграцией ИИ, WebSocket-соединениями и расширенной архитектурой. Проект эволюционировал от простого приложения с SQLite до полноценной системы с PostgreSQL, JWT-аутентификацией, AI-генерацией задач и контейнеризацией через Docker."
url: "web-app-ptm"
tech:
    - "Docker"
    - "OpenRouter"
    - "Nginx"
    - "PostgreSQL"
    - "SQLAlchemy"
    - "WebSockets"
    - "JWT"
    - "TS"
    - "jotai"
    - "FastAPI"
    - "React"
    - "SCSS"
cover: "vid/ptm2-cover.mp4"
media:
    - "vid/ptm2-show-task-editor.mp4"
    - "vid/ptm2-show-create-task.mp4"
    - "vid/ptm2-filtration.mp4"
    - "pic/ptm1.webp"
    - "vid/ptm0.mp4"
code_url: "https://github.com/rev-cv/test-cash-flow"
demo_url: ""
macket_url: ""
---

#### Контекст и цель

PTM (Project Task Manager) – это инновационная система управления задачами, разработанная для радикального снижения когнитивной нагрузки и повышения операционной эффективности пользователя. Проект эволюционировал из версии ptm (базовая) в ptm2-sky (масштабируемая, AI-ориентированная).

**Решаемая проблема:** Традиционные таск-менеджеры требуют от пользователя значительных временных и умственных затрат на категоризацию, планирование и поддержание структуры, что часто делает систему нерентабельной по соотношению "затраты/польза". Недостаток контекстуального поиска также снижает возможность быстро найти актуальную задачу в момент наличия свободного ресурса.

Проект ptm2-sky отказался от парадигмы жёсткой структуры, предложив концепцию **"Управления Хаосом"**, которая включает в себя:

- **Сбор Неструктурированной Информации:** Система принимает задачи в их исходном, неструктурированном виде (концепция, идея, черновик).
- **Автоматическое Обогащение AI:** Модуль Искусственного Интеллекта выполняет автоматическое структурирование и обогащение данных: генерирует подзадачи, производит оценку рисков, влияния и других метаданных, превращая хаотичную запись в готовый к работе элемент.
- **Контекстуальная Доставка:** Сложная система фильтрации обеспечивает контекстуальную доставку наиболее подходящих задач пользователю в момент запроса, что минимизирует время на поиск и повышает мгновенную продуктивность.

**Цель Проекта:** Создание самоадаптирующейся системы, которая автоматизирует рутинные процессы категоризации и анализа, позволяя пользователю сосредоточиться исключительно на выполнении задач.

#### Ключевые функциональные решения

Архитектура проекта демонстрирует зрелость в использовании современных, масштабируемых паттернов:

- **Масштабируемая многоуровневая архитектура:** Чёткое разделение на Frontend (React/TypeScript) и Backend (FastAPI/Python) обеспечивает гибкость разработки и поддержки, а также горизонтальное масштабирование.
- **Микросервисный подход (ptm2-sky):** Внедрение модульной архитектуры с отдельными роутерами для критических доменов (Задачи, Фильтры, Аутентификация) повышает расширяемость (extensibility) и поддерживает принципы чистой архитектуры.
- **AI-Интеграция:** Глубокая интеграция с внешними AI-сервисами (OpenRouter) для автоматического обогащения данных. AI-модуль генерирует критические атрибуты, такие как оценка рисков, уровень мотивации и детализированные подзадачи.
- **Реал-тайм взаимодействие (WebSockets):** Использование WebSockets для мгновенного обновления данных и асинхронной доставки результатов AI-генерации, что обеспечивает высокий уровень пользовательского опыта (UX).
- **Надежность и безопасность:** Реализована многоуровневая система аутентификации на базе JWT-токенов с поддержкой ролевой модели (RBAC) и настраиваемыми разрешениями.
- **Продвинутая система фильтрации:** Разработана мощная система запросов с UI-конструктором, поддерживающая сложные логические условия, диапазоны и правила сортировки для поиска по AI-генерированным метаданным.

#### Технические детали

- Backend: FastAPI (Python), SQLAlchemy (ORM), PostgreSQL (ptm2-sky), SQLite
- Frontend: React (v18 → v19), TypeScript, Jotai (State Management), SCSS
- Интеграции: OpenRouter API, WebSockets, JWT-аутентификация
- Контейнеризация / Инфраструктура Docker, Docker Compose, Nginx (Reverse Proxy, SSL-терминация), CI/CD
  Архитектурные Особенности Микросервисы (ptm2-sky), Расширенная модель данных с оценками (риски, влияние, стресс, мотивация), WebSocket-сервер для асинхронной обработки.

#### Достижения / результаты

- **Успешная AI-интеграция и асинхронная обработка:** Реализация стабильной интеграции с внешними AI-сервисами и механизма асинхронной обработки запросов через WebSockets и фоновые задачи asyncio на бэкенде.
- **Архитектурная масштабируемость:** Успешный переход от монолитной архитектуры на SQLite к микросервисному дизайну с PostgreSQL и поддержкой RBAC, обеспечивающий высокую надёжность и готовность к росту.
- **Разработка поисковой системы:** Создание мощного механизма фильтрации и запросов, критически важного для реализации концепции "Контекстуальной Доставки Задач".
- **Профессиональная инфраструктура:** Внедрение полной контейнеризации (Docker) с конфигурациями для Dev и Production, включая Nginx для SSL-терминации, что демонстрирует навыки в DevOps-практиках.

#### Сложности и как они были решены

**Интеграция с внешними AI-сервисами:** Обработка асинхронных AI-запросов и возврат результатов пользователю в реальном времени. Реализовано с использованием WebSocket-сервера с фоновыми задачами asyncio, что позволяет обрабатывать длительные AI-генерации без блокировки интерфейса. Для снижения нагрузки на сервер реализована система временного подключения по короткожевущему токену.

**Сложная система аутентификации и авторизации:** Обеспечение безопасности данных при одновременной поддержке различных ролей пользователей. Использование JWT-токенов с различными схемами аутентификации и ролевой системой с настраиваемыми разрешениями.

**Миграция с SQLite на PostgreSQL:** Переход от простой файловой базы к полноценной клиент-серверной СУБД с сохранением совместимости. Перепроектирование модели данных с учётом особенностей PostgreSQL и добавление поддержки миграций.

**Реализация сложной системы фильтрации:** Создание гибкой системы запросов с поддержкой сложных условий и фильтров. Разработка системы "запросов" с поддержкой включающих/исключающих фильтров, диапазонов и правил сортировки.

#### Будущее проекта и извлеченные уроки

Проект продемонстрировал, что техническое совершенство является необходимым, но не единственным условием успеха продукта. Хотя техническая реализация была выполнена на высоком уровне и полностью функционировала, в процессе эксплуатации был выявлен стратегический недостаток, который не позволил достичь главной цели проекта — полного избавления от рутины.

**Критические факторы недостижения цели:**

- **Незавершенность критического функционала (интеллектуальная фильтрация):** В планах была реализация интеллектуальной фильтрации на основе естественного языка. Концепция предполагала, что пользователь может ввести запрос (например, "Хочу заняться чем-то продуктивным на 30 минут"), а AI автоматически сформирует пресет фильтров на основе метаданных задачи. Отсутствие этого функционала вынуждало вручную создавать и прописывать фильтры, что перечеркнуло ключевое ценностное предложение об автоматизации.
- **Архитектурное Ограничение AI-Автономии:** Было принято решение ограничить степень автономии AI-системы в обогащении данных из опасений, что неконтролируемый "хаос" метаданных сделает систему непредсказуемой и не поддающейся управлению. Это инженерное решение, призванное обеспечить стабильность, не позволило ИИ полностью взять на себя когнитивную нагрузку по структурированию задач, что также стало препятствием на пути к полному устранению рутины.

**Извлеченные уроки:**

- **Баланс между контролем и автоматизацией:** Успех AI-продуктов требует тщательного баланса между инженерной стабильностью (контроль) и реализацией конечной пользовательской ценности (автономия ИИ). В данном случае стремление к контролю вступило в конфликт с заявленной целью полной автоматизации.
- **Приоритет пользовательской ценности:** Техническая архитектура должна быть полностью подчинена безупречной реализации конечной ценности (UX). Неполная автоматизация, даже при высоком техническом качестве, не достигает цели.
- **Критичность внешней валидации:** Отсутствие своевременной обратной связи от целевой аудитории не позволило оперативно скорректировать стратегический и архитектурный недостатки.

**Статус Проекта:**

Развитие проекта было временно приостановлено в связи с исчерпанием личных ресурсов, необходимостью сфокусироваться на поиске работы и отсутствием внешней валидации, что является типичными рисками для некоммерческих инициатив.
