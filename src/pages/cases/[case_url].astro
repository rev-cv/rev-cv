---
import { getCollection, type CollectionEntry } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import CasePage from "../../components/CasePage.astro";

// интерфейс для props
interface Props {
    caseItem: CollectionEntry<"cases">;
}

export async function getStaticPaths() {
    const cases = await getCollection("cases");

    return cases.map((caseItem: CollectionEntry<"cases">) => ({
        params: { case_url: caseItem.slug },
        props: { caseItem },
    }));
}

const { caseItem } = Astro.props;
const { Content } = await caseItem.render();
---

<Layout
    title={caseItem.data.title}
    description={caseItem.data.descr}
    cover={caseItem.data.cover}
    keywords={[
        "портфолио",
        "кейс",
        "разработка",
        "проект",
        ...caseItem.data.tech,
    ]}
>
    <CasePage caseItem={caseItem} Content={Content} />
</Layout>
